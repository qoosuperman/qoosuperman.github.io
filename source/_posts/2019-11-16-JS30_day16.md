---
title: "JS30 day16 Text Shadow Mouse Move Effect"
catalog: true
toc_nav_num: true
date: 2019-11-16 22:26:24
subtitle: ""
header-img: "https://images.unsplash.com/photo-1573770273825-ee235e3a9fb1?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1526&q=80"
tags:
- Javascript
catagories:
- Javascript
updateDate: 2019-11-16 22:26:24
# top: 1

---
# JS30 day16 - JS30 day16 Text Shadow Mouse Move Effect

## ä½œæ¥­å…§å®¹

ä»Šå¤©æ•™å­¸çš„å…§å®¹æ˜¯æ ¹æ“šæ»‘é¼ çš„ç§»å‹•ä¾†è®“æ–‡å­—çš„é™°å½±è·Ÿè‘—ç§»å‹•ï¼Œåœ¨é€™è£¡é¢æˆ‘ç›®å‰èªç‚ºé‚„æœ‰å¾ˆé›£ç™¼ç¾çš„é›· (this è·Ÿ e.target ä¸åŒ)ï¼Œæ•´é«”è€Œè¨€æˆ‘è¦ºå¾—æ•ˆæœæ»¿é…·çš„ï¼
å¯ä»¥çœ‹çœ‹é€™å€‹[CodePen](https://codepen.io/gbvjpsln/pen/eYYQjKW)

## å­¸åˆ°ä»€éº¼

- JS
  1. ES6 èªæ³•ç³–ï¼š
  ```js
  const width = hero.offsetWidth
  const height = hero.offsetHeight
  // ES6 èªæ³•ä¸Šé¢å…©è¡Œå¯ä»¥è®Šæˆä¸‹é¢é€™æ¨£
  const { offsetWidth: width, offsetHeight: height } = hero
  ```

  2. ä¸€é–‹å§‹çš„ JS é•·é€™æ¨£ï¼š
  
  ```js
  const hero = document.querySelector('.hero')
  const text = document.querySelector('h1')

  function shadow(e){
    const { offsetWidth: width, offsetHeight: height } = hero
    let { offsetX: x, offsetY: y } = e
    console.log(x,y)
  }

  hero.addEventListener('mousemove', shadow)
  ```
  å¥‡æ€ªçš„æ˜¯é€™æ™‚å€™å¦‚æœæŠŠæ»‘é¼ ç§»åˆ° h1 å·¦ä¸Šæ–¹ï¼Œåº§æ¨™æœƒæ¥è¿‘ 0
  ![](https://i.imgur.com/ugWGwtR.png)
  **é€™æ˜¯å› ç‚ºé€™æ™‚å€™æˆ‘å€‘çš„ event taget æ˜¯ h1 è€Œä¸æ˜¯ hero!**
  ```js
  console.log(this, e.target)
  function shadow(e){
    console.log(this, e.target) // å¦‚æœåœ¨ h1 ä¸Šé¢çš„è©±ï¼Œthis ä»ç„¶æ˜¯ heroï¼Œä½† e.target æ˜¯ h1
  }
  ```
  å› æ­¤æ–¹æ³•è¦æ”¹å¯«æˆ  
  ```js
  function shadow(e){
    const { offsetWidth: width, offsetHeight: height } = hero
    let { offsetX: x, offsetY: y } = e
    if(this !== e.target){
      x = x + e.target.offsetLeft
      y = y + e.target.offsetTop
    }
  }
  ```
  é€™æ¨£å¯«çš„è©±ï¼Œå¦‚æœ target è®Šæˆ h1 å°±æœƒåŠ ä¸Š h1 å·¦ä¸Šè§’çš„ x è·Ÿ y åº§æ¨™ï¼Œé”åˆ°çµ±ä¸€æ•ˆæœ
  
åƒè€ƒè³‡æ–™ï¼š
https://github.com/wesbos/JavaScript30

code å…§å®¹ï¼š

HTML:
```html
<div class="hero">
  <h1 contenteditable>ğŸ”¥WOAH!</h1>
</div>
```
CSS:
```css
html {
  color: black;
  font-family: sans-serif;
}

body {
  margin: 0;
}

.hero {
  min-height: 100vh;
  display: flex;
  justify-content: center;
  align-items: center;
  color: black;
}

h1 {
  text-shadow: 10px 10px 0 rgba(0,0,0,1);
  font-size: 100px;
}
```
JS:
```js
const hero = document.querySelector('.hero')
const text = document.querySelector('h1')
const walk = 100; //100px

function shadow(e){
  const { offsetWidth: width, offsetHeight: height } = hero
  let { offsetX: x, offsetY: y } = e

  if(this !== e.target){
    x = x + e.target.offsetLeft
    y = y + e.target.offsetTop
  }
  
  const xWalk = Math.round((x / width * walk) - (walk / 2))
  const yWalk = Math.round((y / height * walk) - (walk / 2))
  
  text.style.textShadow = `${xWalk}px ${yWalk}px 0 red`
}

hero.addEventListener('mousemove', shadow)
```